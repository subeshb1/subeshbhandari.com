---
title: Code highlighting with Shiki
description: A demonstration of Shiki syntax highlighting in MDX
date: 2024-04-03
tags: [code, syntax-highlighting, shiki, mdx]
author: Subesh Bhandari
---

# Code highlighting with Shiki

This post demonstrates how Shiki syntax highlighting works in MDX. Shiki provides beautiful, accurate code highlighting using VS Code's syntax highlighting engine.

## JavaScript example

```js
function greet(name) {
  console.log(`Hello, ${name}!`);
  return `Hello, ${name}!`;
}

// Call the function
greet('World');
```

## TypeScript example

```ts
interface User {
  id: number;
  name: string;
  email: string;
}

function getUser(id: number): Promise<User> {
  return fetch(`/api/users/${id}`)
    .then(response => {
      if (!response.ok) {
        throw new Error('Failed to fetch user');
      }
      return response.json();
    });
}

// Usage with async/await
async function displayUser(id: number) {
  try {
    const user = await getUser(id);
    console.log(`User: ${user.name} (${user.email})`);
  } catch (error) {
    console.error('Error fetching user:', error);
  }
}
```

## React component example

```tsx
import { useState, useEffect } from 'react';

interface CounterProps {
  initialCount?: number;
}

export default function Counter({ initialCount = 0 }: CounterProps) {
  const [count, setCount] = useState(initialCount);
  
  useEffect(() => {
    document.title = `Count: ${count}`;
    
    return () => {
      document.title = 'React App';
    };
  }, [count]);
  
  return (
    <div className="counter">
      <h2>Counter: {count}</h2>
      <button onClick={() => setCount(count - 1)}>-</button>
      <button onClick={() => setCount(count + 1)}>+</button>
      <button onClick={() => setCount(initialCount)}>Reset</button>
    </div>
  );
}
```

## CSS example

```css
.counter {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.5rem;
  border: 1px solid #eaeaea;
  border-radius: 8px;
  margin: 1rem 0;
}

.counter h2 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.counter button {
  margin: 0 0.5rem;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  background-color: #0070f3;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.counter button:hover {
  background-color: #0060df;
}
```

## Bash commands

```bash
# Install dependencies
npm install shiki rehype-pretty-code

# Start the development server
npm run dev

# Build for production
npm run build
```

## JSON configuration

```json
{
  "name": "shiki-demo",
  "version": "1.0.0",
  "scripts": {
    "dev": "next dev",
    "build": "next build"
  },
  "dependencies": {
    "next": "latest",
    "react": "latest",
    "shiki": "^0.14.0",
    "rehype-pretty-code": "^0.10.0"
  }
}
```

## Highlighted lines

You can also highlight specific lines:

```js {3,6-8}
import { useState } from 'react';

// This line will be highlighted
function App() {
  const [count, setCount] = useState(0);
  // These lines will be highlighted
  const increment = () => {
    setCount(count + 1);
  };
  
  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={increment}>Increment</button>
    </div>
  );
}
```

## Conclusion

With Shiki, you get accurate syntax highlighting that matches what you see in VS Code, making your code examples more readable and visually appealing. 
